## 各種コマンド

### フロントエンド (TypeScript/React)
- リントチェック: `npm run lint`
- 型チェック: `npm run check-types`
- テスト: `npm run test`

### バックエンド (Go/Echo)
- リントチェック: `golangci-lint run`
- テスト: `go test ./...`
- ビルド: `go build -o bin/server ./cmd/server`

## 動作確認

- プルリクエストオープン前には、必ずテスト、リントチェック、型チェックのコマンドが成功することを確認してください。
- バックエンド（Go）については必ずテストコードを書いてください。テストの実施はコンテナ上で行なってください。
- フロントエンドについては、テストコードの作成は任意ですが、作成しない場合、ブラウザ上での動作確認は必須です。

## アーキテクチャ方針

### クリーンアーキテクチャ
- 依存の方向は外側から内側へ（Handler → UseCase → Domain）
- ドメイン層は外部ライブラリやフレームワークに依存しない
- インターフェースを使って依存性を逆転させる

### ディレクトリ構成（バックエンド）
```
internal/
├── domain/       # エンティティ、リポジトリインターフェース
├── usecase/      # ビジネスロジック
├── infrastructure/  # DB実装、外部API
└── interface/    # ハンドラー、DTO
```

## コーディング規約

### 共通
- 例外の握りつぶしを行わないこと。エラーは適切にハンドリングまたは上位に伝播させる

### Go（バックエンド）
- N+1問題を防ぐため、関連データの取得には事前にIDを収集してIN句でまとめて取得すること
- SQLクエリをループ内で実行しないこと
- エラーは必ず処理する（`_ = someFunc()` のような無視は禁止）
- 構造体のフィールドやメソッドの可視性を意識する（公開/非公開）

### TypeScript/React（フロントエンド）
- any型はなるべく使わないこと
- 関数の引数や戻り値の型は明示的に指定すること
- フォームでは非制御コンポーネント（react-hook-formなど）を使用すること

### データアクセス
- factoryIdが付与されているテーブルを検索する際は必ずfactoryIdを条件に含めること

### デザイン関係
- アイコンはMaterial Symbolsを使用（className={`material-symbols-...`}）
- Figma上のアイコンはダウンロードせず、同様のMaterial Symbolsアイコンを使用